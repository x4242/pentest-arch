#!/usr/bin/env bash

# Description:
# ------------
# Installation and configuration of pentest tools.
#
# lastmod: 2019-09-08T11:20:27+02:00
# Change History:
# ---------------
# - 2019-09-08: added pacman/yay db snc prior to install
# - 2019-08-07: added error output if Installation of package failed
# - 2019-07-31: created

# String definitions for colored printf output
# [ ERROR ] in light red
# [ INFO  ] in light green
# [ INPUT ] in light yellow
STR_ERROR="[ \e[91mERROR\e[0m ]"
STR_INFO="[ \e[92mINFO\e[0m  ]"
STR_INPUT="[ \e[93mINPUT\e[0m ]"

##########################################
# Check if root / sudo
##########################################
if [ "$EUID" -eq 0 ]; then
  printf "%b Do not run with sudo / as root.\n" "${STR_ERROR}" >&2
  exit 1
fi

# sync package databases
sudo pacman -Sy
yay -Sy

pacman_pentest_pkgs=(
                    exploitdb
                    hashcat
                    john
                    metasploit
                    sqlmap
                    wpscan
                    )

for package in ${pacman_pentest_pkgs[*]}; do
  sudo pacman -S --needed --noconfirm ${package}
  if [ $? -ne 0 ]; then
    printf "%b Installation of package '%b' failed.\n" "${STR_ERROR}" "${package}" >&2
  fi
done

aur_pentest_pkgs=(
                  burbsuite
                  dirbuster
                  gobuster-git
                  hash-identifier
                  responder
                  rockyou
                  seclists-git
                  wfuzz
                  )

for package in ${aur_pentest_pkgs[*]}; do
  yay -S --noconfirm ${package}
  if [ $? -ne 0 ]; then
    printf "%b Installation of package '%b' failed.\n" "${STR_ERROR}" "${package}" >&2
  fi
done

exit 0
